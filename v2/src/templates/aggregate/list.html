{% extends "iframebase.html" %}
{% load ch_extras %}

{% block title %}List Aggregates{% endblock title %}

{% block content %}
<div class="aggregate_list">
	<div class="table_div">
		<table class="fulltable" id="messages">
			<tr>
				<th class="logo">Logo</th>
                <th class="name">Name</th>
                <th class="type">Type</th>
				<th class="location">Location</th>
				<th class="description">Description</th>
				<th class="resources">Size</th>
				<th class="owners">Owners</th>
				<th class="status">Status</th>
			</tr>
			{% comment %}
			{% for generic_am in aggregate_list %}
			{% with generic_am.as_leaf_class as am %}
			<tr>
				<td class="logo">{{ am.get_logo_url }}</td>
				<td class="name"><a href="{{ am.get_edit_url }}">{{ am.name }}</a></td>
				<td class="type">{{ am|get_meta_field:"verbose_name" }}</td>
				<td class="location">{{ am.location }}</td>
				<td class="description">{{ am.description }}</td>
				<td class="resources">{{ am.resource_set.count }}</td>
				<td class="owners">
					{% for admin_info in am.admins_info_set %}
					{{ admin_info.user.username }}
					{% if not forloop.last %}
					,
					{% endif %}
					{% endfor %}
		        </td>
				<td class="status">{% if am.available %}<img src="/img/active.png">{% else %}<img src="/img/inactive.png">{% endif %}</td>
			</tr>
			{% endwith %}
			{% endfor %}
			{% endcomment %}
		</table>
	</div>
    <div class="links">
        <form method="post" action="">
            {{ form.as_table }}
            <input type="submit" value="Add Aggregate" />
        </form>
    </div>
</div>
{% endblock content %}
