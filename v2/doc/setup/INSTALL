The following directions apply for openSuSE 11.2:

Note the following conventions. A '#' at the beginning of a line means execute
as root, while a '$' means execute as normal user.

Install requirements to run our Django project:
-----------------------------------------------
# zypper addrepo -f http://download.opensuse.org/repositories/devel:/languages:/python/openSUSE_11.2 python
# zypper install python-setuptools python-django python-decorator python-django-autoslug python-m2crypto python-curl python-imaging
# easy_install -Z django-registration rpc4django

Edit Django Settings:
---------------------
edit the <egeni_root>/v2/src/python/clearinghouse/settings.py and:
1. Set the database parameters (see the Django documentation).
2. Set the SITE_DOMAIN to your host's address
3. Set the SITE_NAME to what you would like to call your site

Test Django Application:
------------------------
$ export PYTHONPATH=$PYTHONPATH:<egeni_root>/v2/src/python
$ cd <egeni_root>/v2/src/python/clearinghouse
$ python manage.py runserver

Point your browser to localhost:8000 to make sure Django works. Kill the server.

Setup Apache2 to use SSL:
-------------------------
# zypper addrepo -f http://download.opensuse.org/repositories/Apache:/Modules/openSUSE_11.2/ Apache:Modules
# zypper install apache2 apache2-mod_wsgi apache2-mod_macro apache2-itk
# ln -s <egeni_root>/v2/src/config/apache/vhost-macros.conf /etc/apache2/conf.d/

Edit the <egeni_root>/v2/src/config/apache/vhost-clearinghouse.conf and point
it to the correct <egeni_root> and set the correct port to listen to.

# ln -s <egeni_root>/v2/src/config/apache/vhost-clearinghouse.conf /etc/apache2/vhosts.d/
# mkdir /var/log/apache2/clearinghouse
# chmod o-w /var/log/apache2/clearinghouse
# a2enmod wsgi
# a2enmod ssl
# a2enmod macro
# a2enflag SSL
# /usr/bin/gensslcert

After the steps below, please ensure that apache can reach the the directories
below for reading/writing since it is running as user wwwrun and group www:
# chgrp -R www <egeni_root>/v2/src/
# chmod -R g+r <egeni_root>/v2/src/
# chmod -R g+rw <egeni_root>/v2/src/db

Restart apache:
# /etc/init.d/apache2 restart

Point your browser to https://localhost/ to make sure SSL works.

Using a different port:
-----------------------
To change the port to use, 

Add Certificates for Trusted GENI sites:
----------------------------------------
IMPORTANT: Note the .crt extension for the cert file
# cp <geni-ca-cert> /etc/apache2/ssl.crt/<geni-ca>.crt
# make -C /etc/apache2/ssl.crt
# /etc/init.d/apache2 restart

Setting up the GENI test harness:
---------------------------------
# zypper install python-dateutil
- Unpack the latest harness and link its src directory to 'gcf' as a sibling of
  'clearinghouse'. If there's no __init__.py, add it as an empty file.
- Follow the instructions in the harness README.txt to setup the test harness
  GPO, but don't run the tests yet.
- Follow the instructions above to add the GENI CA to the apache trusted CA dir 
- Add the 'clearinghouse.gapi_tester' to INSTALLED_APPLICATIONS
- Create a temporary directory for SFA <sfa-tmp>
- Run the server with the environment variable TMPDIR set to <sfa-tmp>
- Since nothing is persistent with the geni tests, you will need to reuse the
  same Python Django process for each request. To do that, open 
  vhost-macros.conf and replace the following line:

    Use WSGISetup $app_name $prefix $app_path $extra_dir_macro MultiWSGIDaemonProcess

  with this:
  
    Use WSGISetup $app_name $prefix $app_path $extra_dir_macro SingleWSGIDaemonProcess

- Restart apache


