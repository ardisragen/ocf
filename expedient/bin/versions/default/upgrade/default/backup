#!/bin/bash

###
#       @author: msune
#	@organization: i2CAT
#	@project: Ofelia FP7
#	@description: backup module
###

#inform user
printheader "info#" "Using default backup module..."

SRC_DIR=/opt/ofelia/expedient/

#Backing up files
cp $SRC_DIR $BACKUP_PATH

#Backing up database
local TMP_PATH=$PWD

cd $SRC_DIR/src/python/expedient/clearinghouse/ || error "Target directory does not exit anymore?Â¿"

python manage.py dumpdata > $BACKUP_PATH/dbdump.data || error "Could backup data"
$TMP_PATH/../tools/sqlDump.py $BACKUP_PATH/dbdump.sql || warning "Could not backup data using SQL... (is redundant). Proceeding with upgrade..."" 

cd $TMP_PATH

