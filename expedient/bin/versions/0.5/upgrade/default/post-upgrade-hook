#!/bin/bash

###
#       @author:lbergesio, CarolinaFernandez
#       @organization: i2CAT
#       @project: Ofelia FP7
#       @description: post-upgrade-hook module  
###

#inform user
printHeader "info#" "Using specific 0.5 post-upgrade-hook module..."

# Move original plugin folders inside temp folder
TMP_DIR=/opt/tmp/ofeliatmp$EXECPID
SRC_DIR=/opt/ofelia/expedient

if [ -d $SRC_DIR/src/python/vt_plugin ] || [ -d $SRC_DIR/src/python/openflow ]; then
    # Creates series of subdirectories all of a sudden
    mkdir -p $TMP_DIR/expedient/src/python/
fi

# Moving basic plugins from old directory to new location to avoid loading their *.pyc files
if [ -d $SRC_DIR/src/python/vt_plugin ]; then
    mv $SRC_DIR/src/python/vt_plugin $TMP_DIR/expedient/src/python/vt_plugin || error "Maybe some directory is not present?"
fi

if [ -d $SRC_DIR/src/python/openflow ]; then
    mv $SRC_DIR/src/python/openflow $TMP_DIR/expedient/src/python/openflow || error "Maybe some directory is not present?"
fi

