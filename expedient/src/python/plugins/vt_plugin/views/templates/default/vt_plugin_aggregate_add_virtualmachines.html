{% extends "vt_plugin_base.html" %}

{% block title %}Add Virtual Machine at server {{ server_name }}.{% endblock title %}

{% block head %}

<script type="text/javascript">
	$(document).ready(function() {
		$("#id_disc_image").change(function(){
            	if (document.getElementById("id_disc_image").value == "spirent"){
			document.getElementById("id_hdSetupType").value="file-full-image";
			document.getElementById("id_virtualizationSetupType").value="hvm";
			document.getElementById("id_hdSetupType").disabled=true;
			document.getElementById("id_virtualizationSetupType").disabled=true;
		}
            	else if (document.getElementById("id_disc_image").value == "default"){
			document.getElementById("id_hdSetupType").value="file-image";
			document.getElementById("id_virtualizationSetupType").value="paravirtualization";
			document.getElementById("id_hdSetupType").disabled=true;
			document.getElementById("id_virtualizationSetupType").disabled=true;
		}
		else{
			document.getElementById("id_hdSetupType").disabled=false;
			document.getElementById("id_virtualizationSetupType").disabled=false;
		};        
		$("#form_create_VM").click(function(){
			document.getElementById("id_hdSetupType").disabled=false;
                        document.getElementById("id_virtualizationSetupType").disabled=false;
		});
	});
});
</script>


{% endblock %}

{% block content %}
<div class="main">
	<h1>Create a new Virtual Machine in server <span class="highlight">{{ server_name }}</span></h1>
	
	<form method="post" action="">{% csrf_token %}
            <table class="separator-table">
                <tr>
                    <td id="error_td" colspan="2">
                    {% if exception != "" %}    
                        <ul class="errorlist"><li>{{ exception }}</li></ul>
                    {% endif %}
                    </td>
                </tr>
                {% for field in form %}
                  {% if field.name != "resource_ptr"%}
                    <tr> <th> {{ field.label_tag }}:</th><td> {{ field }}</td></tr>
                  {% endif %}
                {% endfor %}
            </table>
		<div id = "buttons" class="center"> 
			<input type="submit" id="form_create_VM" name="create_new_vms" value="Done" /> |
			<a href="{% url slice_detail slice.id %}">Cancel</a>
		</div>
	</form>
</div>
{% endblock content %}
