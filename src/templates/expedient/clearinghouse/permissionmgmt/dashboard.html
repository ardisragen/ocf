{% extends "iframebase.html" %}
{% load ch_extras %}

{% block title %}Permission Management{% endblock title %}

{% block content %}
<div class="permission_mgmt">
	<h3>Pending Permission Requests</h3>
	<div class="permission_requests">
		<table class="fulltable" id="permission_request_table">
			<tr>
				<th>Approve</th>
				<th>Deny</th>
				<th>Delegate</th>
				<th>Requester</th>
				<th>Permission Name</th>
				<th></th>
			</tr>
			{% for req in perm_reqs %}
			<tr>
				<td></td>
			</tr>
			{% endfor %}
		</table>
	</div>
	<div class="table_div">
		<table class="fulltable" id="projects_table">
			<tr>
				<th class="name">Name</th>
                <th class="description">Description</th>
                <th class="owner">Owner</th>
                <th class="members">Members</th>
                <th class="slices">Slices</th>
                <th class="actions">Actions</th>
			</tr>
			{% for project in project_list %}
			<tr>
				<td class="name">{{ project.name }}</td>
				<td class="description">{{ project.description }}</td>
                <td class="owner">{{ project.owner.username }}</td>
                <td class="members">
                	{% for member in projects.members.all %}
					<a href="mailto:{{ member.email }}">{{ member.username }}</a>{% if not forloop.last %},{% endif %}
					{% endfor %}
                </td>
                <td class="slices">
                	{% for slice in project.slice_set.all %}
                	<a href="{% url slice_detail slice.id %}">{{ slice.name }}</a>{% if not forloop.last %},{% endif %}
                	{% endfor %}
                </td>
				<td class="actions">
					<a href="{% url project_iframe_update project.id %}">update</a>,
					<a href="{% url project_detail project.id %}">details</a>,
					<a href="{% url project_delete project.id %}">delete</a>
				</td>
			</tr>
			{% endfor %}
		</table>
	</div>
    <div class="create_project">
        <input type="button" value="Create"
        onclick="document.location='{% url project_create %}'"/>
    </div>
</div>
{% endblock content %}
